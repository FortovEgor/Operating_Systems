# ОТЧЕТ
### Фортов Егор Кириллович, БПИ214
### Вариант 20
### Задача
Задача о магазине – 2 (забывчивые покупатели). В магазине работают два отдела, каждый отдел обладает уникальным ассортиментом. В каждом отделе работает один продавец. В магазин ходят исключительно забывчивые покупатели, поэтому каждый покупатель носит с собой список товаров, которые желает купить. Покупатель приобретает товары точно в том порядке, в каком они записаны в его списке. При этом товары в списке расположены в случайном порядке, что заставляет покупателя переходить от отде- ла к отделу, если это требуется для совершения покупок. Продавец может обслужить только одного покупателя за раз. Покупатель, вставший в очередь, засыпает пока не дойдет до продавца. Продавец засыпает, если в его отделе нет покупателей, и просыпается, если появится хотя бы один. Создать приложение, моделирующее работу магазина в течение рабочего дня. Каждый продавец — клиент. Покупатели изначально порождаются отдельным клиентом. Сервер обеспечивает взаимодействие покупателей и клиентов.
### Сценарий задачи на 4-5 баллов
Сервер слушает сокет по сокету с IP и PORT, указанными в командной строке. Как только от клиента приходит запрос, он создает новый поток и обрабатывает пришедшего клиента там. 

Клиент, в свою очередь, приходит с информацией о себе (которая включает его уник. id, id товаров, которые надо купить, кол-во этих товаров и index конкретного товара, который в данный момент он покупает), а также с информацией о двух отделах магазина, каждый из которых содержит свой уник. id, индексы товаров, которые находятся в данном отделе и кол-во товаров в данном отделе). 

Сервер обрабатывает пришедшую информаицию и завершает работу, как только клиент закончил передачу всех данных. Сокеты закрываются.

### Сценарий задачи на 6-7 баллов
Программа на данную оценку была полностью переписана - так как в выводе по сути нечего писать (даже названий товаров нет). Однако я все же оставил ее код в оценке на 4-5 баллов, так как убил на него 3 дня! И чтобы не запутаться, снабдил новую программу русскими комментариями (МАКСИМАЛЬНО ПОДРОБНО ВСЕ РАСПИСАЛ!).

В данной же программе я создал эмуляцию с продуктами (для адекватного вывода). 

В целом программа работает по тому же принципу, что и предыдущая (КОММЕНТАРИИ В ПРОГРАММЕ ВСЕ ДЕТАЛЬНО ОПИСЫВАЮТ, КОПИРОВАТЬ ИХ СЮДА НЕ ВИЖУ СМЫСЛА!).

Пример использования программы:
```
$ ./server 55555
Waiting for clients...
New customer #4 connected
New customer #5 connected
New salesman #1 has started working
New customer #6 connected
New customer #7 connected
New customer #8 connected
New salesman #2 has started working
Buy banana
Not found bread
Buy orange
Buy tomato
Buy potato
Buy apple
Not found cheese
Buy chicken
Buy carrot
Not found banana
Buy milk
Customer #4 has left the store
Not found banana
Buy bread
Customer #6 has left the store
Buy banana
Buy cheese
Customer #7 has left the store
Customer #5 has left the store
Buy banana
Buy orange
Customer #8 has left the store
Working day has ended
```

Пример использования клиентской программы для вывода:
```
$ ./client_connect 127.0.0.1 55555 bread cheese milk
Not found bread
Buy cheese
Buy milk
```
